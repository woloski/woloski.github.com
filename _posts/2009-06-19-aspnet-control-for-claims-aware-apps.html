--- 
layout: post
title: ASP.NET control for claims-aware apps
published: true
meta: 
  _edit_lock: "1245542522"
  _edit_last: "24"
tags: 
- Claim-Based Identity
- Geneva
- Identity
type: post
status: publish
---
<div id="codeSnippetWrapper"><a href="http://blogs.msdn.com/vbertocci/archive/2009/06/19/use-claims-for-driving-your-web-ui-without-even-seeing-a-line-of-code.aspx">Vittorio just announced it in his blog</a>… we helped writing an experiment of raising the level of abstraction to work against claims. We created a server control that allows you to work with claims. There are three types of expression:</div>
<ul>
	<li><strong>Claim Value</strong>: set the value of a property with the value of a specified claim type</li>
</ul>
<span class="kwrd">&lt;</span><span class="html">cc1:ClaimsDrivenModifierControl</span> <span class="attr">ID</span><span class="kwrd">="cdmFirstName"</span> <span class="attr">runat</span><span class="kwrd">="server"</span> <span class="attr">ControlToDrive</span><span class="kwrd">="txtFirstName"</span> <span class="attr">PropertyToModify</span><span class="kwrd">="Text"</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;</span><span class="html">Expression</span> <span class="attr">Type</span><span class="kwrd">="ClaimValue"</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;</span><span class="html">ClaimType</span><span class="kwrd">&gt;</span>http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname<span class="kwrd">&lt;/</span><span class="html">ClaimType</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;/</span><span class="html">Expression</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;/</span><span class="html">cc1:ClaimsDrivenModifierControl</span><span class="kwrd">&gt;</span>
	<li><strong>Condition</strong>: set the value of a property based on a condition <span class="kwrd">&lt;</span><span class="html">cc1:ClaimsDrivenModifierControl</span> <span class="attr">ID</span><span class="kwrd">="cdmPrivileges"</span> <span class="attr">runat</span><span class="kwrd">="server"</span> <span class="attr">ControlToDrive</span><span class="kwrd">="pnlPrivileges"</span> <span class="attr">PropertyToModify</span><span class="kwrd">="Visible"</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;</span><span class="html">Expression</span> <span class="attr">Type</span><span class="kwrd">="Condition"</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;</span><span class="html">ClaimType</span><span class="kwrd">&gt;</span>http://cloudbuddies.com/2009/06/FrequentFlierProgram<span class="kwrd">&lt;/</span><span class="html">ClaimType</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;</span><span class="html">Operator</span><span class="kwrd">&gt;</span>Equals<span class="kwrd">&lt;/</span><span class="html">Operator</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;</span><span class="html">Value</span><span class="kwrd">&gt;</span>FabrikamAirlines<span class="kwrd">&lt;/</span><span class="html">Value</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;/</span><span class="html">Expression</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;/</span><span class="html">cc1:ClaimsDrivenModifierControl</span><span class="kwrd">&gt;</span>
<ul>
	<li><strong>Mapping: </strong>it will set the value of a property based on a set of conditions with an output <span class="kwrd">&lt;</span><span class="html">cc1:ClaimsDrivenModifierControl</span> <span class="attr">ID</span><span class="kwrd">="cdmMemebershipLevel"</span> <span class="attr">runat</span><span class="kwrd">="server"</span> <span class="attr">ControlToDrive</span><span class="kwrd">="imgMembershipLevel"</span> <span class="attr">PropertyToModify</span><span class="kwrd">="ImageUrl"</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;</span><span class="html">Expression</span> <span class="attr">Type</span><span class="kwrd">="Mapping"</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;</span><span class="html">cc1:Mapping</span> <span class="attr">ClaimType</span><span class="kwrd">="http://cloudbuddies.com/2009/06/FrequentFlierLevel"</span> <span class="attr">ClaimValue</span><span class="kwrd">="silver"</span> <span class="attr">Result</span><span class="kwrd">="~/img/silver.png"</span> <span class="kwrd">/&gt;</span> <span class="kwrd">&lt;</span><span class="html">cc1:Mapping</span> <span class="attr">ClaimType</span><span class="kwrd">="http://cloudbuddies.com/2009/06/FrequentFlierLevel"</span> <span class="attr">ClaimValue</span><span class="kwrd">="gold"</span> <span class="attr">Result</span><span class="kwrd">="~/img/gold.png"</span> <span class="kwrd">/&gt;</span> <span class="kwrd">&lt;/</span><span class="html">Expression</span><span class="kwrd">&gt;</span> <span class="kwrd">&lt;/</span><span class="html">cc1:ClaimsDrivenModifierControl</span><span class="kwrd">&gt;</span></li>
</ul>
And of course you can use the designer to set this all up. I’m not a huge fan of server controls and designers but I know that there are people out there that loves them, so this is something that will bring you closer to developing claims-aware applications.

Download the control from <a title="http://code.msdn.microsoft.com/ClaimsDrivenControl/Release/ProjectReleases.aspx?ReleaseId=2861" href="http://code.msdn.microsoft.com/ClaimsDrivenControl/Release/ProjectReleases.aspx?ReleaseId=2861">http://code.msdn.microsoft.com/ClaimsDrivenControl/Release/ProjectReleases.aspx?ReleaseId=2861</a></li>
