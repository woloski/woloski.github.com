--- 
layout: post
title: "SaaS: Workflow in multitenant environment"
published: true
meta: {}

tags: 
- Architecture
- SaaS
- Windows Workflow Foundation
type: post
status: publish
---
<p class="MsoNormal"><span>As part of writing my thesis about Software     <br />as a Service, I started to collaborate with </span><a href="http://blogs.msdn.com/gianpaolo"><span>Gianpaolo Carraro</span></a><span> and </span><a href="http://blogs.msdn.com/fred_chong/"><span>Fred Chong</span></a><span> from the </span><a href="http://msdn.microsoft.com/architecture"><span>Architecture       <br />Strategy team</span></a><span>. The interaction with them has been great     <br />so far and some of the topics we&#226;&#8364;&#8482;ve been discussing included how to enable      <br />workflow in a multitenant environment. </span></p>  <p class="MsoNormal"><span>When designing an application that will be     <br />delivered as SaaS you might want to provide tooling to your tenants to allow      <br />them extending the data model, the business process, the UI, etc. to fit their      <br />unique needs. While thinking about how to customize business processes I came up      <br />with a maturity model that I found descriptive.</span></p>  <p class="MsoNormal"><span>First, I asked myself this question: <b>How       <br />a workflow can change?</b></span></p>  <ul style="margin-top: 0cm" type="square">   <li class="MsoNormal"><b><span>Behavioral</span></b><span>       <br />(decisions/rules)</span> </li>    <li class="MsoNormal"><b><span>Structural</span></b><span>       <br />(activities)</span> </li> </ul>  <div style="padding-right: 0cm;padding-left: 0cm;padding-bottom: 4pt;padding-top: 0cm">   <h2><span>Behavioral changes</span></h2> </div>  <p class="MsoNormal"><span>The <b>behavioral changes</b> are related      <br />to decisions that are modeled in the workflow. Like &#226;&#8364;&#339;If the PO is greater than      <br />X then&#226;&#8364;&#166;&#226;&#8364;. So for TenantA that value might be $3,000, but for TenantB it could      <br />be $1,000,000.</span></p>  <p class="MsoNormal"><span>Let's focus on behavioral changes for a     <br />moment. These are the maturity levels I recognize regarding this kind of      <br />changes:</span></p>  <ul style="margin-top: 0cm" type="square">   <li class="MsoNormal"><b><span>Level 1</span></b><span>:       <br />every workflow decision lives inside the workflow         <p></p>       <a href="http://blogs.southworks.net/mwoloski/files/2008/06/bc1.png"><img height="223" alt="bc1" src="http://blogs.southworks.net/mwoloski/files/2008/06/bc1-thumb.png" width="290" border="0" /></a>         <br /></span></li>    <li class="MsoNormal"><b><span>Level 2</span></b><span>:       <br />same as level 1 but the decisions could be dynamically updated on runtime         <p></p>       <a href="http://blogs.southworks.net/mwoloski/files/2008/06/bc2.png"><img height="258" alt="bc2" src="http://blogs.southworks.net/mwoloski/files/2008/06/bc2-thumb.png" width="367" border="0" /></a>         <br /></span></li>    <li class="MsoNormal"><b><span>Level 3</span></b><span>:       <br />externalize decisions on policy and rulesets providing change management         <p></p>       <a href="http://blogs.southworks.net/mwoloski/files/2008/06/bc3.png"><img height="248" alt="bc3" src="http://blogs.southworks.net/mwoloski/files/2008/06/bc3-thumb.png" width="305" border="0" /></a>         <br /></span></li> </ul>  <p class="MsoNormal"><span>Level 3 is very interesting because:</span></p>  <ul>   <li><span style="font-family: wingdings"><span></span></span><span>Rules can be versioned </span></li>    <li><span style="font-family: wingdings"><span></span></span><span>Rules can be stored outside the workflow </span></li>    <li><span style="font-family: wingdings"><span></span></span><span>Rules support forward chaining </span></li>    <li><span style="font-family: wingdings"><span></span></span><span>Rules expose business language</span><span> </span></li> </ul>  <div style="padding-right: 0cm;padding-left: 0cm;padding-bottom: 4pt;padding-top: 0cm">   <h2><span>Structural changes</span></h2> </div>  <p class="MsoNormal"><b><span>Structural changes</span></b><span>, on the other side, are changes to the workflow structure itself.     <br />Like &#226;&#8364;&#339;After the approval of the PO call a webservice on url X&#226;&#8364;. </span></p>  <p class="MsoNormal"><span>Here I also identified a maturity model for     <br />the adoption</span></p>  <ul style="margin-top: 0cm" type="square">   <li class="MsoNormal"><b><span>Level 1</span></b><span>:       <br />design a basic set of workflow flavors and let the tenant decides         <p></p>       <a href="http://blogs.southworks.net/mwoloski/files/2008/06/bc4.png"><img height="233" alt="bc4" src="http://blogs.southworks.net/mwoloski/files/2008/06/bc4-thumb.png" width="426" border="0" /></a>         <br /></span></li>    <li class="MsoNormal"><b><span>Level 2</span></b><span>:       <br />design a base workflow and let the tenant perform fixed customizations         <p></p>       <a href="http://blogs.southworks.net/mwoloski/files/2008/06/bc5.png"><img height="307" alt="bc5" src="http://blogs.southworks.net/mwoloski/files/2008/06/bc5-thumb.png" width="424" border="0" /></a>         <br /></span></li>    <li class="MsoNormal"><b><span>Level 3</span></b><span>:       <br />design a base workflow and let the tenant perform modifications using a        <br />workflow designer which exposes business terms         <p></p>       <a href="http://blogs.southworks.net/mwoloski/files/2008/06/bc6.png"><img height="267" alt="bc6" src="http://blogs.southworks.net/mwoloski/files/2008/06/bc6-thumb.png" width="212" border="0" /></a>         <br /></span></li> </ul>  <p class="MsoNormal"><span>Some images have been taken from the article &quot;<a href="http://www.architecturejournal.net/2006/issue7/F2_AmazingRace/default.aspx">The Amazing Race Metaphor</a>&quot;, </span><a href="http://enterprised.blogspot.com/">Vignesh Swaminathan</a>, <span><a href="http://www.architecturejournal.net">Architect Journal</a>, Issue # 7</span>    <p>In my next post I will write about how can     <br />we achieve some of these maturity levels using </p>   <a href="windowsworkflow.net"><span>Windows Workflow Foundation</span></a><span>!</span></p>
