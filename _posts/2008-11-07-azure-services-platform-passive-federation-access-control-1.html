--- 
layout: post
title: "Azure Services Platform - Passive Federation and Access Control #1"
published: true
meta: {}

tags: 
- Azure
- Federation
- Geneva
- Identity Management
- LiveID
- PDC08
- Zermatt
type: post
status: publish
---
<a href="http://blogs.southworks.net/mwoloski/files/2008/11/windowslivewritercloudcomputing-d6a0image-5.png"><img height="34" alt="image" src="http://blogs.southworks.net/mwoloski/files/2008/11/windowslivewritercloudcomputing-d6a0image-thumb.png" width="237" align="right" border="0" /></a>   <p>The last couple of months together with other people at <a href="http://www.southworks.net">Southworks</a> we've been working with the DPE team on samples, demos, hands on labs for PDC all related to the cloud computing services Microsoft announced at PDC, the Azure Services Platform.&#160; </p>  <p></p>  <p>During the week, I attended <a href="http://www.identityblog.com/">Kim Cameron</a>'s and <a href="http:/blogs.msdn.com/vibro.net">Vittorio Bertocci</a> session where they talked about identity federation and claim based architecture using &quot;Geneva&quot; Server, Microsoft Federation Gateway, &quot;Geneva&quot; Framework (previously known as Zermatt) and the .NET Services Access Control. I enjoyed watching Vittorio during the session.&#160; </p>  <p>Other interesting things we did in the identity arena with <a href="http://dunnry.com">Ryan Dunn</a> is use the .NET Services Access Control and Windows Live ID to delegate authentication and authorization to the cloud. In this post I will introduce the scenario where you can federate your application against .NET Services Access Control which indeed federates against Windows LiveID. This will allow users of your application to log in to your application using their Windows LiveID account and then use .NET Services Access Control to transform the email claim to a set of claims to perform authorization access checks.</p>  <h3><strong>Identity + Access Control</strong> using <strong>Windows Live ID + .NET Services Access Control</strong></h3>  <p>Windows Live ID can authenticate users of your web site and then use .NET Services Access Control to map claims between the Live ID (email) and some other claim (like role, operation, task). The image below shows a claim mapping that you would create in your .NET Services account.</p>  <p><a href="http://blogs.southworks.net/mwoloski/files/2008/11/windowslivewritercloudcomputing-d6a0image-7.png"><img height="219" alt="image" src="http://blogs.southworks.net/mwoloski/files/2008/11/windowslivewritercloudcomputing-d6a0image-thumb-2.png" width="569" border="0" /></a> </p>  <p>The output claims could be used later in the application to perform access check against resources or modify the UI according to the incoming claims. The flow is governed by the WS-Federation protocol as shown below:</p>  <p>&#160;</p>  <p><a href="http://blogs.southworks.net/mwoloski/files/2008/11/windowslivewritercloudcomputing-d6a0image-13.png"><img height="480" alt="image" src="http://blogs.southworks.net/mwoloski/files/2008/11/windowslivewritercloudcomputing-d6a0image-thumb-5.png" width="590" border="0" /></a> </p>  <p>In a nutshell, the browser will click on the Sign In link on the website and it will be redirected to the token issuer, in this case the .NET Services Access Control passive STS. The home realm on the url will be login.live.com and the .NET Services STS trust on Windows LiveID tokens. The user will log in on Windows LiveID and it will send the token back to the .NET Services STS. Finally the claim mapping will occur and the token will come back to the website with the authorization claims.</p>  <p>In the following post I will show how to configure your application to read the incoming token claims and do access check over page urls.</p>
